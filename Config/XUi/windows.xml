<?xml version="1.0" encoding="utf-8"?>
<!--
  Demonata Gaming Metadata Format ©2025
  SPDX-License-Identifier: LicenseRef-DemonataGaming-Metadata-1.0
  See LICENSE.md for terms.
-->
<!--
  ==================================================
  HUD & UI Adjustments
  @version    1.0.1
  @date       2025-12-17
  @author     Demonata Gaming

  @group      HUDTweaks
  @description
    UI enhancements for cleaner HUD display. Adds stealth stat bar,
    recenters compass with marker, lowers toolbelt, and repositions
    health/food/water/stamina bars for a more minimal, immersive layout.
    Creates UI elements for the Apiary and Dew Collector conversion.
	@xref       Config/XUi/xui.xml → MAIN: XUi Rule Override
                      blocks.xml → SECTION: APIARY AND DEW COLLECTORS
  ==================================================
-->
<configs>
  <!-- Always show the target bar -->
  <set xpath="/windows/window[@name='windowTargetBar']/@visibility">always</set>
  <!-- Adds center marker to HUD Compass -->
  <append xpath="/windows/window[@name='windowCompass']">
    <label depth="20" name="TextContent" pos="234,3" width="13" height="54" text="I" font_size="60" color="22,22,22,245" justify="center" />
  </append>
  <!-- Lowers the toolbelt position in the UI -->
  <set xpath="/windows/window[@name='windowToolbelt']/@pos">-377,82</set>
  <!-- Removes food and water stat bars from toolbelt (relocated below) [Deprecated by patch 2.5]-->
  <!--<remove xpath="/windows/window[@name='windowToolbelt']/rect/rect[@stat_type='Water']" /> [Deprecated by patch 2.5] -->
  <!--<remove xpath="/windows/window[@name='windowToolbelt']/rect/rect[@stat_type='Food']" /> [Deprecated by patch 2.5] -->
  <!--Removes HUD changes made in patch 2.5. -->
  <remove xpath="/windows/window[@name='HUDLeftStatBars']" />
  <!-- Appends new custom stat window with Stealth, Stamina, Health, Food, and Water bars -->
  <append xpath="/windows">
    <window name="DGHUDLeftStatBars" anchor="LeftBottom">
      <rect name="hud" pos="9,150" rows="2" cols="1" width="168" side="right">
        <rect width="171" height="46" controller="HUDStatBar" stat_type="Stealth" visible="{statvisible}">
          <sprite depth="1" name="border" color="0,0,0,150" height="46" type="sliced" />
          <sprite depth="2" name="background" color="0,0,0,140" type="sliced" />
          <filledsprite depth="3" name="background" color="110,110,110,128" type="filled" fill="1" />
          <filledsprite depth="4" name="BarContent" color="{stealthcolor}" type="filled" fill="{statfill}" />
          <sprite depth="5" name="Icon" atlas="{staticonatlas|once}" sprite="{staticon|once}" size="35,35" pos="8,-6" foregroundlayer="true" />
          <label depth="6" name="TextContent" pos="6,-8" font_size="32" color="[white]" justify="center" pivot="topleft" text="{statcurrent}" height="35" />
          <sprite depth="8" name="border" color="0,0,0,255" type="sliced" fillcenter="false" />
          <filledsprite depth="8" name="background" color="0,0,0,255" width="171" fillcenter="false" type="filled" fill="1" />
          <filledsprite depth="3" name="background" color="0,0,0,255" width="170" fillcenter="false" type="filled" fill="1" />
        </rect>
        <rect width="171" height="46" pos="0,-50" controller="HUDStatBar" stat_type="Stamina" visible="{statvisible}">
          <sprite depth="1" name="border" color="0,0,0,128" type="sliced" />
          <sprite depth="2" name="background" color="0,0,0,140" type="sliced" />
          <filledsprite depth="3" name="background" color="110,110,110,128" width="169" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="5" name="BarContent" color="0,54,255,128" width="169" type="filled" fill="{statfill}" />
          <sprite depth="6" name="Icon" atlas="{staticonatlas|once}" sprite="ui_game_symbol_agility" size="35,35" pos="8,-6" foregroundlayer="true" />
          <label depth="7" name="TextContent" pos="6,-8" font_size="32" color="[white]" justify="center" pivot="topleft" text="{statcurrentwithmax}" height="35" />
          <sprite depth="8" name="border" color="0,0,0,255" type="sliced" fillcenter="false" />
          <filledsprite depth="8" name="background" color="0,0,0,255" width="171" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="3" name="background" color="0,0,0,255" width="170" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
        </rect>
        <rect width="171" height="46" pos="0,-100" controller="HUDStatBar" stat_type="Health" visible="{statvisible}">
          <sprite depth="1" name="border" color="0,0,0,128" type="sliced" />
          <sprite depth="2" name="background" color="0,0,0,140" type="sliced" />
          <filledsprite depth="3" name="background" color="110,110,110,128" width="169" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="5" name="BarContent" color="255,0,0,128" width="169" type="filled" fill="{statfill}" />
          <sprite depth="6" name="Icon" atlas="{staticonatlas|once}" sprite="{staticon|once}" size="35,35" pos="8,-6" foregroundlayer="true" />
          <label depth="7" name="TextContent" pos="6,-8" font_size="32" color="[white]" justify="center" pivot="topleft" text="{statcurrentwithmax}" height="35" />
          <sprite depth="8" name="border" color="0,0,0,255" type="sliced" fillcenter="false" />
          <filledsprite depth="8" name="background" color="0,0,0,255" width="171" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="3" name="background" color="0,0,0,255" width="170" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
        </rect>
        <rect width="171" height="46" pos="174,-50" controller="HUDStatBar" stat_type="Food" visible="{statvisible}">
          <sprite depth="1" name="border" color="0,0,0,128" type="sliced" />
          <sprite depth="2" name="background" color="0,0,0,140" type="sliced" />
          <filledsprite depth="3" name="background" color="110,110,110,128" width="169" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="5" name="BarContent" color="0,128,0,150" width="169" type="filled" fill="{statfill}" />
          <sprite depth="6" name="Icon" atlas="{staticonatlas|once}" sprite="{staticon|once}" size="35,35" pos="8,-6" foregroundlayer="true" />
          <label depth="7" name="TextContent" pos="6,-8" font_size="32" color="[white]" justify="center" pivot="topleft" text="{statcurrent}%" height="35" />
          <sprite depth="8" name="border" color="0,0,0,255" type="sliced" fillcenter="false" />
          <filledsprite depth="8" name="background" color="0,0,0,255" width="171" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="3" name="background" color="0,0,0,255" width="170" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
        </rect>
        <rect width="171" height="46" pos="174,-100" controller="HUDStatBar" stat_type="Water" visible="{statvisible}">
          <sprite depth="1" name="border" color="0,0,0,128" type="sliced" />
          <sprite depth="2" name="background" color="0,0,0,140" type="sliced" />
          <filledsprite depth="3" name="background" color="110,110,110,128" width="169" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="5" name="BarContent" color="64,164,223,150" width="169" type="filled" fill="{statfill}" />
          <sprite depth="6" name="Icon" atlas="{staticonatlas|once}" sprite="{staticon|once}" size="35,35" pos="8,-6" foregroundlayer="true" />
          <label depth="7" name="TextContent" pos="6,-8" font_size="32" color="[white]" justify="center" pivot="topleft" text="{statcurrent}%" height="35" />
          <sprite depth="8" name="border" color="0,0,0,255" type="sliced" fillcenter="false" />
          <filledsprite depth="8" name="background" color="0,0,0,255" width="171" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
          <filledsprite depth="3" name="background" color="0,0,0,255" width="170" fillcenter="false" type="filled" fill="{statmodifiedmax}" />
        </rect>
      </rect>
      <rect name="hud" pos="90,160" side="left" controller="BuffPopoutList" pivot="BottomLeft">
        <panel width="168" height="46" name="item" visible="false" pivot="right" disableautobackground="true" pos="70, 0" style="press" sound="[recipe_click]" on_hover="true">
          <sprite depth="3" pos="0,0" name="Background" sprite="ui_game_popup" height="46" width="162" pivot="center" flip="Horizontally" color="[transparent]" />
          <sprite depth="4" name="Icon" size="40,40" pos="-54,0" pivot="center" color="[transparent]" />
          <label depth="6" name="TextContent" pos="0,0" font_size="28" color="[white]" justify="center" height="40" pivot="center" />
        </panel>
      </rect>
    </window>
  </append>

  <!-- TEST Custom Apiary and Dew Collector Windows -->
  <append xpath="windows">
    <window name="windowApiaryInput" width="228" height="204" panel="Right" cursor_area="true">
      <panel style="header.panel">
        <sprite style="header.icon" sprite="ui_game_symbol_water"/>
        <label style="header.name.shrink" text="INPUT" />
      </panel>

      <sprite depth="2" name="backgroundMain" sprite="menu_empty3px" pos="0,-46" height="153" color="[black]" type="sliced" fillcenter="false" />
      <rect name="content" depth="1" pos="0,-46" height="153">
        <!-- 6 slots (3x2) for ingredients. Pos adjusted to standard margin. -->
        <grid name="inventory" depth="7" rows="2" cols="3" pos="3,-3" cell_width="75" cell_height="75" controller="WorkstationInputGrid" repeat_content="true">
          <item_stack name="0"/>
        </grid>
      </rect>
      <rect name="content2" depth="0" pos="78, -49" width="147" height="148">
        <sprite depth="1" color="[mediumGrey]" type="sliced"/>
      </rect>
    </window>

    <!-- Custom Apiary Tools Window -->
    <window name="windowToolsApiary" width="228" height="121" panel="Right" cursor_area="true">
      <panel style="header.panel">
        <sprite style="header.icon" sprite="ui_game_symbol_wrench"/>
        <label style="header.name.shrink" text="TOOLS" text_key="xuiTools" />
      </panel>

      <rect name="content" depth="0" pos="0,-46" height="75" disablefallthrough="true">
        <grid name="inventory" rows="1" cols="3" pos="3,-3" cell_width="75" cell_height="75" controller="WorkstationToolGrid" repeat_content="true" required_tools="toolApiaryExtractor,toolApiaryBroodBox" required_tools_only="true">
          <item_stack controller="RequiredItemStack" name="0"/>
        </grid>
      </rect>
    </window>

    <!-- Custom Apiary Output Window -->
    <window name="windowApiaryOutput" width="228" height="198" panel="Right" cursor_area="true">
      <panel style="header.panel">
        <sprite style="header.icon" sprite="ui_game_symbol_loot_sack"/>
        <label style="header.name.shrink" text="OUTPUT" text_key="xuiOutput" />
      </panel>
      <rect name="content" depth="0" pos="0,-46" height="153">
        <sprite depth="2" name="backgroundMain" sprite="menu_empty3px" height="153" color="[black]" type="sliced" fillcenter="false" />
        <!-- 6 slots (3x2) for output. Pos adjusted to standard margin. -->
        <grid name="inventory" depth="10" rows="2" cols="3" pos="3,-3" cell_width="75" cell_height="75" controller="WorkstationOutputGrid" repeat_content="true">
          <item_stack name="0"/>
        </grid>
      </rect>
    </window>
    <!--Custom Dew Collector Input Window-->
    <window name="windowDewInput" width="228" height="204" panel="Right" cursor_area="true">
      <panel style="header.panel">
        <sprite style="header.icon" sprite="ui_game_symbol_water"/>
        <label style="header.name.shrink" text="INPUT" />
      </panel>

      <sprite depth="2" name="backgroundMain" sprite="menu_empty3px" pos="0,-46" height="153" color="[black]" type="sliced" fillcenter="false" />
      <rect name="content" depth="1" pos="0,-46" height="153">
        <!-- 6 slots (3x2) for ingredients. Pos adjusted to standard margin. -->
        <grid name="inventory" depth="7" rows="2" cols="3" pos="3,-3" cell_width="75" cell_height="75" controller="WorkstationInputGrid" repeat_content="true">
          <item_stack name="0"/>
        </grid>
      </rect>
      <rect name="content2" depth="0" pos="78, -49" width="147" height="148">
        <sprite depth="1" color="[mediumGrey]" type="sliced"/>
      </rect>
    </window>

    <!-- Custom Dew Collector Tools Window -->
    <window name="windowToolsDew" width="228" height="121" panel="Right" cursor_area="true">
      <panel style="header.panel">
        <sprite style="header.icon" sprite="ui_game_symbol_wrench"/>
        <label style="header.name.shrink" text="TOOLS" text_key="xuiTools" />
      </panel>

      <rect name="content" depth="0" pos="0,-46" height="75" disablefallthrough="true">
        <grid name="inventory" rows="1" cols="3" pos="3,-3" cell_width="75" cell_height="75" controller="WorkstationToolGrid" repeat_content="true" required_tools="toolDewGatherer,toolDewTarp,toolDewFilter" required_tools_only="true">
          <item_stack controller="RequiredItemStack" name="0"/>
        </grid>
      </rect>
    </window>

    <!-- Custom Dew Collector Output Window -->
    <window name="windowDewOutput" width="228" height="198" panel="Right" cursor_area="true">
      <panel style="header.panel">
        <sprite style="header.icon" sprite="ui_game_symbol_loot_sack"/>
        <label style="header.name.shrink" text="OUTPUT" text_key="xuiOutput" />
      </panel>
      <rect name="content" depth="0" pos="0,-46" height="153">
        <sprite depth="2" name="backgroundMain" sprite="menu_empty3px" height="153" color="[black]" type="sliced" fillcenter="false" />
        <!-- 6 slots (3x2) for output. Pos adjusted to standard margin. -->
        <grid name="inventory" depth="10" rows="2" cols="3" pos="3,-3" cell_width="75" cell_height="75" controller="WorkstationOutputGrid" repeat_content="true">
          <item_stack name="0"/>
        </grid>
      </rect>
    </window>
  </append>
</configs>
